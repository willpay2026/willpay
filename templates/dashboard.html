<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Will-Pay | Legado Wilyanny</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #000; color: #fff; }
        .oro-text { color: #D4AF37; }
        .card-willpay { background: #111; border: 1px solid #D4AF37; padding: 25px; border-radius: 15px; }
        .btn-oro { background: linear-gradient(45deg, #D4AF37, #F9E2AF); color: #000; font-weight: bold; }
    </style>
</head>
<body class="p-4">
    <div class="container">
        {% if not user %}
        <div class="card-willpay mx-auto" style="max-width: 600px;">
            <h2 class="oro-text text-center">üè¶ REGISTRO BANCARIO WILL-PAY</h2>
            <form action="/procesar_registro" method="POST">
                <p class="text-secondary small border-bottom border-warning mt-3">DATOS DE IDENTIDAD</p>
                <input type="text" name="nombre" class="form-control mb-2 bg-dark text-white border-warning" placeholder="Nombre completo / Raz√≥n Social" required>
                <input type="text" name="cedula" class="form-control mb-2 bg-dark text-white border-warning" placeholder="V/J - C√©dula o RIF" required>
                <input type="text" name="telefono" class="form-control mb-3 bg-dark text-white border-warning" placeholder="Tel√©fono Pago M√≥vil" required>

                <p class="text-secondary small border-bottom border-warning">ACTIVIDAD ECON√ìMICA</p>
                <select name="actividad" id="actividad" class="form-select mb-2 bg-dark text-white border-warning" onchange="checkActividad()" required>
                    <option value="">Seleccione su oficio...</option>
                    <option value="linea_transporte">L√≠nea de Transporte (Urbana/Extra)</option>
                    <option value="transporte_independiente">Transporte Independiente</option>
                    <option value="taxis_afiliados">Taxis Afiliados</option>
                    <option value="moto_taxis">Moto Taxis</option>
                    <option value="delivery">Delivery</option>
                    <option value="barbero">Barbero / Estilista</option>
                    <option value="comida_rapida">Comida R√°pida / Luncher√≠a</option>
                    <option value="bodega">Bodega / Abasto</option>
                    <option value="centro_educativo">Centro Educativo</option>
                    <option value="oficio_hogar">Labores del Hogar / Costurero</option>
                    <option value="tecnico">Electricista / Mec√°nico / Soldador</option>
                    <option value="construccion">Alba√±il / Obrero / Pintor</option>
                </select>

                <div id="extra_negocio" style="display:none;">
                    <input type="text" name="nombre_negocio" class="form-control mb-2 bg-dark text-white border-info" placeholder="Nombre de la L√≠nea o Negocio">
                </div>
                <div id="extra_transporte" style="display:none;">
                    <select name="tipo_transporte" class="form-select mb-2 bg-dark text-white border-info">
                        <option value="urbana">Ruta Urbana</option>
                        <option value="extra_urbana">Ruta Extra-Urbana</option>
                    </select>
                </div>

                <p class="text-secondary small border-bottom border-info mt-3">DATOS DE RETIRO BANCARIO</p>
                <select name="banco" class="form-select mb-2 bg-dark text-white border-info" required>
                    <option value="0102">Banco de Venezuela</option>
                    <option value="0134">Banesco</option>
                    <option value="0105">Mercantil</option>
                    <option value="0172">Bancamiga</option>
                </select>
                <select name="metodo" id="metodo" class="form-select mb-2 bg-dark text-white border-info" onchange="checkMetodo()">
                    <option value="pago_movil">Pago M√≥vil</option>
                    <option value="transferencia">Transferencia Bancaria</option>
                </select>

                <div id="datos_cuenta" style="display:none;">
                    <input type="text" name="numero_cuenta" class="form-control mb-2 bg-dark text-white border-info" placeholder="20 d√≠gitos de cuenta">
                    <div class="d-flex gap-2">
                        <select name="tipo_cuenta" class="form-select mb-2 bg-dark text-white border-info"><option value="corriente">Corriente</option><option value="ahorro">Ahorro</option></select>
                        <select name="tipo_titular" class="form-select mb-2 bg-dark text-white border-info"><option value="personal">Personal</option><option value="juridica">Jur√≠dica</option></select>
                    </div>
                </div>

                <button type="submit" class="btn btn-oro w-100 mt-4">ACTIVAR MI CUENTA WILL-PAY</button>
            </form>
        </div>
        {% else %}
        <h1 class="oro-text text-center">BIENVENIDO, {{ user.nombre }}</h1>
        <div class="card-willpay text-center mt-4">
            <h2 class="display-4">{{ "{:,.2f}".format(user.saldo_bs) }} Bs</h2>
        </div>
        {% endif %}
    </div>

    <script>
    function checkActividad() {
        var a = document.getElementById("actividad").value;
        document.getElementById("extra_negocio").style.display = (["linea_transporte", "taxis_afiliados", "moto_taxis", "bodega", "centro_educativo"].includes(a)) ? "block" : "none";
        document.getElementById("extra_transporte").style.display = (a === "linea_transporte") ? "block" : "none";
    }
    function checkMetodo() {
        document.getElementById("datos_cuenta").style.display = (document.getElementById("metodo").value === "transferencia") ? "block" : "none";
    }
    </script>
</body>
</html>
